(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1038:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.PREVIEW_VALUE=void 0;var i=n(22);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.PREVIEW_VALUE=12345.432;class r extends i.ExtensibleFunction{constructor(e){super(e=>this.format(e)),o(this,"id",void 0),o(this,"label",void 0),o(this,"description",void 0),o(this,"formatFunc",void 0),o(this,"isInvalid",void 0);const{id:t=(0,i.isRequired)("config.id"),label:n,description:r="",formatFunc:a=(0,i.isRequired)("config.formatFunc"),isInvalid:s=!1}=e;this.id=t,this.label=null!=n?n:t,this.description=r,this.formatFunc=a,this.isInvalid=s}format(e){return null==e||Number.isNaN(e)?""+e:e===Number.POSITIVE_INFINITY?"∞":e===Number.NEGATIVE_INFINITY?"-∞":this.formatFunc(e)}preview(e=12345.432){return e+" => "+this.format(e)}}var a=r;t.default=a},1045:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i={DOLLAR:"$,.2f",DOLLAR_ROUND:"$,d",DOLLAR_ROUND_SIGNED:"+$,d",DOLLAR_SIGNED:"+$,.2f",FLOAT:",.2f",FLOAT_1_POINT:",.1f",FLOAT_2_POINT:",.2f",FLOAT_3_POINT:",.3f",FLOAT_SIGNED:"+,.2f",FLOAT_SIGNED_1_POINT:"+,.1f",FLOAT_SIGNED_2_POINT:"+,.2f",FLOAT_SIGNED_3_POINT:"+,.3f",INTEGER:",d",INTEGER_SIGNED:"+,d",PERCENT:",.2%",PERCENT_1_POINT:",.1%",PERCENT_2_POINT:",.2%",PERCENT_3_POINT:",.3%",PERCENT_SIGNED:"+,.2%",PERCENT_SIGNED_1_POINT:"+,.1%",PERCENT_SIGNED_2_POINT:"+,.2%",PERCENT_SIGNED_3_POINT:"+,.3%",SI:".3s",SI_1_DIGIT:".1s",SI_2_DIGIT:".2s",SI_3_DIGIT:".3s",SMART_NUMBER:"SMART_NUMBER",SMART_NUMBER_SIGNED:"SMART_NUMBER_SIGNED"};t.default=i},1056:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){const{description:t,formatString:n=(0,r.isRequired)("config.formatString"),label:i,locale:s}=e;let l,u=!1;try{l=void 0===s?(0,o.format)(n):(0,o.formatLocale)(s).format(n)}catch(e){l=e=>e+" (Invalid format: "+n+")",u=!0}return new a.default({description:t,formatFunc:l,id:n,isInvalid:u,label:i})};var i,o=n(500),r=n(22),a=(i=n(1038))&&i.__esModule?i:{default:i}},1065:function(e,t,n){"use strict";t.__esModule=!0,t.getNumberFormatter=t.formatNumber=t.PREVIEW_VALUE=t.createSiAtMostNDigitFormatter=t.createDurationFormatter=t.createD3NumberFormatter=t.getNumberFormatterRegistry=t.NumberFormatter=t.NumberFormats=void 0;var i=d(n(1045));t.NumberFormats=i.default;var o=c(n(1038));t.NumberFormatter=o.default,t.PREVIEW_VALUE=o.PREVIEW_VALUE;var r=c(n(1067));t.getNumberFormatterRegistry=r.default,t.formatNumber=r.formatNumber,t.getNumberFormatter=r.getNumberFormatter;var a=d(n(1056));t.createD3NumberFormatter=a.default;var s=d(n(1070));t.createDurationFormatter=s.default;var l=d(n(1073));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=i?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}function d(e){return e&&e.__esModule?e:{default:e}}t.createSiAtMostNDigitFormatter=l.default},1067:function(e,t,n){"use strict";t.__esModule=!0,t.getNumberFormatter=function(e){return a().get(e)},t.formatNumber=function(e,t){return a().format(e,t)},t.default=void 0;var i,o=n(22),r=(i=n(1068))&&i.__esModule?i:{default:i};const a=(0,o.makeSingleton)(r.default);var s=a;t.default=s},1068:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var i=n(22),o=s(n(1056)),r=s(n(1069)),a=s(n(1045));function s(e){return e&&e.__esModule?e:{default:e}}class l extends i.RegistryWithDefaultKey{constructor(){super({name:"NumberFormatter",overwritePolicy:i.OverwritePolicy.WARN}),this.registerValue(a.default.SMART_NUMBER,(0,r.default)()),this.registerValue(a.default.SMART_NUMBER_SIGNED,(0,r.default)({signed:!0})),this.setDefaultKey(a.default.SMART_NUMBER)}get(e){const t=(""+(null==e||""===e?this.defaultKey:e)).trim();if(this.has(t))return super.get(t);const n=(0,o.default)({formatString:t});return this.registerValue(t,n),n}format(e,t){return this.get(e)(t)}}t.default=l},1069:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e={}){const{description:t,signed:n=!1,id:i,label:a}=e,c=n?e=>e>0?"+":"":()=>"";return new o.default({description:t,formatFunc:e=>""+c(e)+function(e){if(0===e)return"0";const t=Math.abs(e);if(t>=1e3)return s(e).replace("G","B");if(t>=1)return l(e);if(t>=.001)return u(e);if(t>1e-6)return s(1e6*e)+"µ";return s(e)}(e),id:i||n?r.default.SMART_NUMBER_SIGNED:r.default.SMART_NUMBER,label:null!=a?a:"Adaptive formatter"})};var i=n(500),o=a(n(1038)),r=a(n(1045));function a(e){return e&&e.__esModule?e:{default:e}}const s=(0,i.format)(".3~s"),l=(0,i.format)(".2~f"),u=(0,i.format)(".4~f")},1070:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e={}){const{description:t,id:n,label:r,multiplier:a=1}=e,s=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["description","id","label","multiplier"]);return new o.default({description:t,formatFunc:e=>(0,i.default)(e*a,s),id:null!=n?n:"duration_format",label:null!=r?r:"Duration formatter"})};var i=r(n(1071)),o=r(n(1038));function r(e){return e&&e.__esModule?e:{default:e}}},1071:function(e,t,n){"use strict";const i=n(1072);e.exports=(e,t={})=>{if(!Number.isFinite(e))throw new TypeError("Expected a finite number");t.colonNotation&&(t.compact=!1,t.formatSubMilliseconds=!1,t.separateMilliseconds=!1,t.verbose=!1),t.compact&&(t.secondsDecimalDigits=0,t.millisecondsDecimalDigits=0);const n=[],o=(e,i,o,r)=>{if(!(0!==n.length&&t.colonNotation||0!==e||t.colonNotation&&"m"===o))return;let a,s;if(r=(r||e||"0").toString(),t.colonNotation){a=n.length>0?":":"",s="";const e=r.includes(".")?r.split(".")[0].length:r.length,t=n.length>0?2:1;r="0".repeat(Math.max(0,t-e))+r}else a="",s=t.verbose?" "+(l=i,1===e?l:`${l}s`):o;var l;n.push(a+r+s)},r=i(e);if(o(Math.trunc(r.days/365),"year","y"),o(r.days%365,"day","d"),o(r.hours,"hour","h"),o(r.minutes,"minute","m"),t.separateMilliseconds||t.formatSubMilliseconds||e<1e3)if(o(r.seconds,"second","s"),t.formatSubMilliseconds)o(r.milliseconds,"millisecond","ms"),o(r.microseconds,"microsecond","µs"),o(r.nanoseconds,"nanosecond","ns");else{const e=r.milliseconds+r.microseconds/1e3+r.nanoseconds/1e6,n="number"==typeof t.millisecondsDecimalDigits?t.millisecondsDecimalDigits:0,i=e>=1?Math.round(e):Math.ceil(e),a=n?e.toFixed(n):i;o(Number.parseFloat(a,10),"millisecond","ms",a)}else{const n=((e,t)=>{const n=Math.floor(e*10**t+1e-7);return(Math.round(n)/10**t).toFixed(t)})(e/1e3%60,"number"==typeof t.secondsDecimalDigits?t.secondsDecimalDigits:1),i=t.keepDecimalsOnWholeSeconds?n:n.replace(/\.0+$/,"");o(Number.parseFloat(i,10),"second","s",i)}if(0===n.length)return"0"+(t.verbose?" milliseconds":"ms");if(t.compact)return n[0];if("number"==typeof t.unitCount){const e=t.colonNotation?"":" ";return n.slice(0,Math.max(t.unitCount,1)).join(e)}return t.colonNotation?n.join(""):n.join(" ")}},1072:function(e,t,n){"use strict";e.exports=e=>{if("number"!=typeof e)throw new TypeError("Expected a number");const t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(1e3*e)%1e3,nanoseconds:t(1e6*e)%1e3}}},1073:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e={}){const{description:t,n:n=3,id:i,label:a}=e,s=(0,o.format)("."+n+"s");return new r.default({description:t,formatFunc:e=>{const t=s(e);return t.slice(-1)<"A"?parseFloat(t).toString():t},id:null!=i?i:"si_at_most_"+n+"_digit",label:null!=a?a:"SI with at most "+n+" significant digits"})};var i,o=n(500),r=(i=n(1038))&&i.__esModule?i:{default:i}},1111:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(1035),o=n(1039),r=n(1029),a=n(1030),s=function(e){return e.length},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;Object(r.a)(this,e),this.sortedBins=this.getSortedBins(t,n),this.maxCount=this.getMaxCount(),this.binMap=this.getBinMap()}return Object(a.a)(e,[{key:"getSortedBins",value:function(e,t){return e.reduce((function(e,n,i){var o=t(n.points);return null!=o&&e.push({i:Number.isFinite(n.index)?n.index:i,value:o,counts:n.points.length}),e}),[]).sort((function(e,t){return e.value-t.value}))}},{key:"getValueRange",value:function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1],r=this.sortedBins.length;if(!r)return[0,0];var a=Math.ceil(n/100*(r-1)),s=Math.floor(i/100*(r-1));return[this.sortedBins[a].value,this.sortedBins[s].value]}},{key:"getMaxCount",value:function(){var e=0;return this.sortedBins.forEach((function(t){return e=e>t.counts?e:t.counts})),e}},{key:"getBinMap",value:function(){return this.sortedBins.reduce((function(e,t){return Object.assign(e,Object(i.a)({},t.i,t))}),{})}}]),e}()},1112:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var i=n(1052);function o(e,t){return function(n){return function(e,t,n){var o=e[1]-e[0];if(o<=0)return i.a.warn("quantizeScale: invalid domain, returning range[0]")(),t[0];var r=o/t.length,a=Math.floor((n-e[0])/r);return t[Math.max(Math.min(a,t.length-1),0)]}(e,t,n)}}function r(e,t){return function(n){return(n-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]}}},1167:function(e,t,n){"use strict";var i=n(1029),o=n(1030),r=n(1032),a=n(1031),s=n(1043),l=n(1033),u=n(1122),c=n(1099),d=n(1358),f=n(1225),m=n(1216),v=n(1084),h=n(1052),g=n(1346),p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id,o=void 0===n?Object(g.c)("column-geometry"):n,s=_(e),l=s.indices,u=s.attributes;return Object(r.a)(this,Object(a.a)(t).call(this,Object(v.a)({},e,{id:o,indices:l,attributes:u})))}return Object(l.a)(t,e),t}(n(1162).a);function _(e){var t=e.radius,n=e.height,i=void 0===n?1:n,o=e.nradial,r=void 0===o?10:o,a=e.vertices;h.a.assert(!a||a.length>=r);for(var s=r+1,l=3*s,u=2*Math.PI/r,c=new Uint16Array(3*r*2),d=new Float32Array(3*l),f=new Float32Array(3*l),m=0,v=0;v<s;v++)for(var g=v*u,p=a&&a[v%r],_=a&&a[(v+1)%r],b=Math.sin(g),M=Math.cos(g),N=0;N<2;N++)d[m+0]=p?p[0]:M*t,d[m+1]=p?p[1]:b*t,d[m+2]=(.5-N)*i,f[m+0]=p?_[0]-p[0]:M,f[m+1]=p?_[1]-p[1]:b,m+=3;for(var y=0;y<s;y++){var P=Math.floor(y/2)*Math.sign(y%2-.5),S=P*u,E=a&&a[(P+r)%r],x=Math.sin(S),I=Math.cos(S);d[m+0]=E?E[0]:I*t,d[m+1]=E?E[1]:x*t,d[m+2]=i/2,f[m+2]=1,m+=3}for(var O=0,w=0;w<r;w++)c[O++]=2*w+0,c[O++]=2*w+2,c[O++]=2*w+0,c[O++]=2*w+1,c[O++]=2*w+1,c[O++]=2*w+3;return{indices:c,attributes:{POSITION:{size:3,value:d},NORMAL:{size:3,value:f}}}}n.d(t,"a",(function(){return P}));var b=d.a.fp64LowPart,M=new f.a,N=[0,0,0,255],y={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,fp64:!1,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:function(e){return e.position}},getFillColor:{type:"accessor",value:N},getLineColor:{type:"accessor",value:N},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:M,getColor:{deprecatedFor:["getFillColor","getLineColor"]}},P=function(e){function t(){return Object(i.a)(this,t),Object(r.a)(this,Object(a.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"getShaders",value:function(){return{vs:"\n#define SHADER_NAME column-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute float instanceElevations;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute float instanceStrokeWidths;\n\nattribute vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nvarying vec4 vColor;\n\nvoid main(void) {\n  \n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n  float strokeOffsetRatio = 1.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  } else if (isStroke) {\n    float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n      widthMinPixels, widthMaxPixels) / 2.0;\n    strokeOffsetRatio += sign(positions.z) * project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\n  }\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec2 centroidPosition64xyLow = instancePositions64xyLow;\n  vec3 pos = vec3(project_size(rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius, 0.);\n\n  vec4 position_commonspace;\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64xyLow, pos, position_commonspace);\n\n  vec3 normals_commonspace = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n\n  if (extruded && !isStroke) {\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, position_commonspace.xyz, normals_commonspace);\n    vColor = vec4(lightColor, color.a * opacity) / 255.0;\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity) / 255.0;\n  }\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","gouraud-lighting","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceFillColors:{size:4,type:5121,transition:!0,accessor:"getFillColor",defaultValue:N},instanceLineColors:{size:4,type:5121,transition:!0,accessor:"getLineColor",defaultValue:N},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}},{key:"updateState",value:function(e){var n=e.props,i=e.oldProps,o=e.changeFlags;Object(s.a)(Object(a.a)(t.prototype),"updateState",this).call(this,{props:n,oldProps:i,changeFlags:o});var r=n.fp64!==i.fp64;if(r){var l=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(l)}),this.getAttributeManager().invalidateAll()}(r||n.diskResolution!==i.diskResolution||n.vertices!==i.vertices)&&this._updateGeometry(n)}},{key:"getGeometry",value:function(e,t){var n=new p({radius:1,height:2,vertices:t,nradial:e}),i=0;if(t)for(var o=0;o<e;o++){var r=t[o];i+=Math.sqrt(r[0]*r[0]+r[1]*r[1])/e}else i=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*i}),n}},{key:"_getModel",value:function(e){return new m.a(e,Object.assign({},this.getShaders(),{id:this.props.id,isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_updateGeometry",value:function(e){var t=e.diskResolution,n=e.vertices,i=this.getGeometry(t,n);this.setState({fillVertexCount:i.attributes.POSITION.value.length/3,wireframeVertexCount:i.indices.value.length}),this.state.model.setProps({geometry:i})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,i=this.props,o=i.lineWidthUnits,r=i.lineWidthScale,a=i.lineWidthMinPixels,s=i.lineWidthMaxPixels,l=i.elevationScale,u=i.extruded,c=i.filled,d=i.stroked,f=i.wireframe,m=i.offset,v=i.coverage,h=i.radius,g=i.angle,p=this.state,_=p.model,b=p.fillVertexCount,M=p.wireframeVertexCount,N=p.edgeDistance,y="pixels"===o?n.distanceScales.metersPerPixel[2]:1;_.setUniforms(Object.assign({},t,{radius:h,angle:g/180*Math.PI,offset:m,extruded:u,coverage:v,elevationScale:l,edgeDistance:N,widthScale:r*y,widthMinPixels:a,widthMaxPixels:s})),u&&f&&(_.setProps({isIndexed:!0}),_.setVertexCount(M).setDrawMode(1).setUniforms({isStroke:!0}).draw()),c&&(_.setProps({isIndexed:!1}),_.setVertexCount(b).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!u&&d&&(_.setProps({isIndexed:!1}),_.setVertexCount(2*b/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}},{key:"calculateInstancePositions64xyLow",value:function(e,t){var n=t.startRow,i=t.endRow,o=this.use64bitPositions();if(e.constant=!o,o){var r=this.props,a=r.data,s=r.getPosition,l=e.value,c=n*e.size,d=Object(u.a)(a,n,i),f=d.iterable,m=d.objectInfo,v=!0,h=!1,g=void 0;try{for(var p,_=f[Symbol.iterator]();!(v=(p=_.next()).done);v=!0){var M=p.value;m.index++;var N=s(M,m);l[c++]=b(N[0]),l[c++]=b(N[1])}}catch(e){h=!0,g=e}finally{try{v||null==_.return||_.return()}finally{if(h)throw g}}}else e.value=new Float32Array(2)}}]),t}(c.a);P.layerName="ColumnLayer",P.defaultProps=y},500:function(e,t,n){"use strict";n.r(t);var i=n(1025);n.d(t,"formatDefaultLocale",(function(){return i.a})),n.d(t,"format",(function(){return i.b})),n.d(t,"formatPrefix",(function(){return i.c}));var o=n(320);n.d(t,"formatLocale",(function(){return o.a}));var r=n(217);n.d(t,"formatSpecifier",(function(){return r.b})),n.d(t,"FormatSpecifier",(function(){return r.a}));var a=n(1028);n.d(t,"precisionFixed",(function(){return a.a}));var s=n(1026);n.d(t,"precisionPrefix",(function(){return s.a}));var l=n(1027);n.d(t,"precisionRound",(function(){return l.a}))}}]);