(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1093:function(e,t,n){"use strict";var i=n(735),o=n(736),a=n(738),r=n(737),s=n(739),l=n(965),u=n(758),c=n(851),g=n(853),v=n(811),d=n(771),h=n(812),f=n(764),p=Math.PI/3,m=[0,p,2*p,3*p,4*p,5*p];function y(e){return e[0]}function x(e){return e[1]}var b=n(838);function C(){}n.d(t,"a",(function(){return w}));var S=new l.a,P={colorDomain:null,colorRange:d.b,getColorValue:{type:"accessor",value:null},getColorWeight:{type:"accessor",value:function(e){return 1}},colorAggregation:"SUM",lowerPercentile:{type:"number",value:0,min:0,max:100},upperPercentile:{type:"number",value:100,min:0,max:100},onSetColorDomain:C,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:null},getElevationWeight:{type:"accessor",value:function(e){return 1}},elevationAggregation:"SUM",elevationLowerPercentile:{type:"number",value:0,min:0,max:100},elevationUpperPercentile:{type:"number",value:100,min:0,max:100},elevationScale:{type:"number",min:0,value:1},onSetElevationDomain:C,radius:{type:"number",value:1e3,min:1},coverage:{type:"number",min:0,max:1,value:1},extruded:!1,hexagonAggregator:function(e,t){var n=e.data,i=e.radius,o=e.getPosition,a=function(e,t){var n=t.getDistanceScales().pixelsPerMeter;return e*n[0]}(i,t),r=[],s=Object(b.a)(n),l=s.iterable,u=s.objectInfo,c=!0,g=!1,v=void 0;try{for(var d,h=l[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var f=d.value;u.index++,r.push(Object.assign({screenCoord:t.projectFlat(o(f,u))},f))}}catch(e){g=!0,v=e}finally{try{c||null==h.return||h.return()}finally{if(g)throw v}}return{hexagons:function(){var e,t,n,i=0,o=0,a=1,r=1,s=y,l=x;function u(e){var i,o={},a=[],r=e.length;for(i=0;i<r;++i)if(!isNaN(c=+s.call(null,u=e[i],i,e))&&!isNaN(g=+l.call(null,u,i,e))){var u,c,g,v=Math.round(g/=n),d=Math.round(c=c/t-(1&v)/2),h=g-v;if(3*Math.abs(h)>1){var f=c-d,p=d+(c<d?-1:1)/2,m=v+(g<v?-1:1),y=c-p,x=g-m;f*f+h*h>y*y+x*x&&(d=p+(1&v?1:-1)/2,v=m)}var b=d+"-"+v,C=o[b];C?C.push(u):(a.push(C=o[b]=[u]),C.x=(d+(1&v)/2)*t,C.y=v*n)}return a}function c(e){var t=0,n=0;return m.map((function(i){var o=Math.sin(i)*e,a=-Math.cos(i)*e,r=o-t,s=a-n;return t=o,n=a,[r,s]}))}return u.hexagon=function(t){return"m"+c(null==t?e:+t).join("l")+"z"},u.centers=function(){for(var s=[],l=Math.round(o/n),u=Math.round(i/t),c=l*n;c<r+e;c+=n,++l)for(var g=u*t+(1&l)*t/2;g<a+t/2;g+=t)s.push([g,c]);return s},u.mesh=function(){var t=c(e).slice(0,4).join("l");return u.centers().map((function(e){return"M"+e+"m"+t})).join("")},u.x=function(e){return arguments.length?(s=e,u):s},u.y=function(e){return arguments.length?(l=e,u):l},u.radius=function(i){return arguments.length?(t=2*(e=+i)*Math.sin(p),n=1.5*e,u):e},u.size=function(e){return arguments.length?(i=o=0,a=+e[0],r=+e[1],u):[a-i,r-o]},u.extent=function(e){return arguments.length?(i=+e[0][0],o=+e[0][1],a=+e[1][0],r=+e[1][1],u):[[i,o],[a,r]]},u.radius(1)}().radius(a).x((function(e){return e.screenCoord[0]})).y((function(e){return e.screenCoord[1]}))(r).map((function(e,n){return{position:t.unprojectFlat([e.x,e.y]),points:e,index:n}}))}},getPosition:{type:"accessor",value:function(e){return e.position}},fp64:!1,material:S},M=["getColorValue","colorAggregation","getColorWeight"],k=["getElevationValue","elevationAggregation","getElevationWeight"],w=function(e){function t(){return Object(i.a)(this,t),Object(a.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"initializeState",value:function(){this.state={hexagons:[],sortedColorBins:null,sortedElevationBins:null,colorValueDomain:null,elevationValueDomain:null,colorScaleFunc:C,elevationScaleFunc:C,dimensionUpdaters:this.getDimensionUpdaters()}}},{key:"updateState",value:function(e){var t=this,n=e.oldProps,i=e.props,o=e.changeFlags;this.updateGetValueFuncs(n,i);var a=this.getDimensionChanges(n,i);o.dataChanged||this.needsReProjectPoints(n,i)?this.getHexagons():a&&a.forEach((function(e){return"function"==typeof e&&e.apply(t)}))}},{key:"colorElevationPropsChanged",value:function(e,t){for(var n=!1,i=!1,o=0;o<M.length;o++){var a=M[o];e[a]!==t[a]&&(n=!0)}for(var r=0;r<k.length;r++){var s=k[r];e[s]!==t[s]&&(i=!0)}return{colorChanged:n,elevationChanged:i}}},{key:"updateGetValueFuncs",value:function(e,t){var n=t.getColorValue,i=t.getElevationValue,o=this.props,a=o.colorAggregation,r=o.getColorWeight,s=o.elevationAggregation,l=o.getElevationWeight,u=this.colorElevationPropsChanged(e,t),c=u.colorChanged,g=u.elevationChanged;c&&null===n&&(n=Object(f.b)(a,r)),g&&null===i&&(i=Object(f.b)(s,l)),n&&this.setState({getColorValue:n}),i&&this.setState({getElevationValue:i})}},{key:"needsReProjectPoints",value:function(e,t){return e.radius!==t.radius||e.hexagonAggregator!==t.hexagonAggregator}},{key:"getDimensionUpdaters",value:function(){return{getFillColor:[{id:"value",triggers:["getColorValue","getColorWeight","colorAggregation"],updater:this.getSortedColorBins},{id:"domain",triggers:["lowerPercentile","upperPercentile"],updater:this.getColorValueDomain},{id:"scaleFunc",triggers:["colorDomain","colorRange"],updater:this.getColorScale}],getElevation:[{id:"value",triggers:["getElevationValue","getElevationWeight","elevationAggregation"],updater:this.getSortedElevationBins},{id:"domain",triggers:["elevationLowerPercentile","elevationUpperPercentile"],updater:this.getElevationValueDomain},{id:"scaleFunc",triggers:["elevationDomain","elevationRange"],updater:this.getElevationScale}]}}},{key:"getDimensionChanges",value:function(e,t){var n=this.state.dimensionUpdaters,i=[];for(var o in n){var a=n[o].find((function(n){return n.triggers.some((function(n){return e[n]!==t[n]}))}));a&&i.push(a.updater)}return i.length?i:null}},{key:"getHexagons",value:function(){var e=this.props.hexagonAggregator,t=this.context.viewport,n=e(this.props,t),i=n.hexagons,o=n.hexagonVertices;this.updateRadiusAngle(o),this.setState({hexagons:i}),this.getSortedBins()}},{key:"getPickingInfo",value:function(e){var t=e.info,n=this.state,i=n.sortedColorBins,o=n.sortedElevationBins,a=null;if(t.picked&&t.index>-1){var r=this.state.hexagons[t.index],s=i.binMap[r.index]&&i.binMap[r.index].value,l=o.binMap[r.index]&&o.binMap[r.index].value;a=Object.assign({colorValue:s,elevationValue:l},r)}return Object.assign(t,{picked:Boolean(a),object:a})}},{key:"getUpdateTriggers",value:function(){var e=this,t=this.state.dimensionUpdaters,n={},i=function(i){n[i]={};var o=!0,a=!1,r=void 0;try{for(var s,l=t[i][Symbol.iterator]();!(o=(s=l.next()).done);o=!0){s.value.triggers.forEach((function(t){n[i][t]=e.props[t]}))}}catch(e){a=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw r}}};for(var o in t)i(o);return n}},{key:"updateRadiusAngle",value:function(e){var t=this.props.radius,n=90;if(Array.isArray(e)){e.length<6&&u.a.error("HexagonCellLayer: hexagonVertices needs to be an array of 6 points")();var i=e[0],o=e[3],a=this.context.viewport.getDistanceScales().pixelsPerMeter,r=this.projectFlat(i),s=this.projectFlat(o),l=r[0]-s[0],c=r[1]-s[1],g=Math.sqrt(l*l+c*c);n=Math.acos(l/g)*-Math.sign(c)/Math.PI*180+90,t=g/2/a[0]}this.setState({angle:n,radius:t})}},{key:"getValueDomain",value:function(){this.getColorValueDomain(),this.getElevationValueDomain()}},{key:"getSortedBins",value:function(){this.getSortedColorBins(),this.getSortedElevationBins()}},{key:"getSortedColorBins",value:function(){var e=this.state.getColorValue,t=new v.a(this.state.hexagons||[],e);this.setState({sortedColorBins:t}),this.getColorValueDomain()}},{key:"getSortedElevationBins",value:function(){var e=this.state.getElevationValue,t=new v.a(this.state.hexagons||[],e);this.setState({sortedElevationBins:t}),this.getElevationValueDomain()}},{key:"getColorValueDomain",value:function(){var e=this.props,t=e.lowerPercentile,n=e.upperPercentile,i=e.onSetColorDomain;t>n&&u.a.warn("HexagonLayer: lowerPercentile is bigger than upperPercentile")(),this.state.colorValueDomain=this.state.sortedColorBins.getValueRange([t,n]),"function"==typeof i&&i(this.state.colorValueDomain),this.getColorScale()}},{key:"getElevationValueDomain",value:function(){var e=this.props,t=e.elevationLowerPercentile,n=e.elevationUpperPercentile,i=e.onSetElevationDomain;this.state.elevationValueDomain=this.state.sortedElevationBins.getValueRange([t,n]),"function"==typeof i&&i(this.state.elevationValueDomain),this.getElevationScale()}},{key:"getColorScale",value:function(){var e=this.props.colorRange,t=this.props.colorDomain||this.state.colorValueDomain;this.state.colorScaleFunc=Object(h.b)(t,e)}},{key:"getElevationScale",value:function(){var e=this.props.elevationRange,t=this.props.elevationDomain||this.state.elevationValueDomain;this.state.elevationScaleFunc=Object(h.a)(t,e)}},{key:"_onGetSublayerColor",value:function(e){var t=this.state,n=t.sortedColorBins,i=t.colorScaleFunc,o=t.colorValueDomain,a=n.binMap[e.index]&&n.binMap[e.index].value,r=this.props.colorDomain||o,s=a>=r[0]&&a<=r[r.length-1]?i(a):[0,0,0,0];return s[3]=Number.isFinite(s[3])?s[3]:255,s}},{key:"_onGetSublayerElevation",value:function(e){var t=this.state,n=t.sortedElevationBins,i=t.elevationScaleFunc,o=t.elevationValueDomain,a=n.binMap[e.index]&&n.binMap[e.index].value,r=this.props.elevationDomain||o;return a>=r[0]&&a<=r[r.length-1]?i(a):-1}},{key:"renderLayers",value:function(){var e=this.props,t=e.elevationScale,n=e.extruded,i=e.coverage,o=e.material,a=e.fp64,r=e.transitions,s=this.state,l=s.angle,u=s.radius;return new(this.getSubLayerClass("hexagon-cell",g.a))({fp64:a,radius:u,diskResolution:6,elevationScale:t,angle:l,extruded:n,coverage:i,material:o,getFillColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:r&&{getFillColor:r.getColorValue||r.getColorWeight,getElevation:r.getElevationValue||r.getElevationWeight}},this.getSubLayerProps({id:"hexagon-cell",updateTriggers:this.getUpdateTriggers()}),{data:this.state.hexagons})}}]),t}(c.a);w.layerName="HexagonLayer",w.defaultProps=P},764:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var i={SUM:1,MEAN:2,MIN:3,MAX:4};function o(e,t){return e+t}function a(e,t){return t>e?t:e}function r(e,t){return t<e?t:e}function s(e,t){switch(i[e.toUpperCase()]||i.SUM){case i.MIN:return function(e){return function(e,t){var n=e.map(t).filter(Number.isFinite);return n.length?n.reduce(r,1/0):null}(e,t)};case i.SUM:return function(e){return function(e,t){var n=e.map(t).filter(Number.isFinite);return n.length?n.reduce(o,0):null}(e,t)};case i.MEAN:return function(e){return function(e,t){var n=e.map(t).filter(Number.isFinite);return n.length?n.reduce(o,0)/n.length:null}(e,t)};case i.MAX:return function(e){return function(e,t){var n=e.map(t).filter(Number.isFinite);return n.length?n.reduce(a,-1/0):null}(e,t)};default:return null}}},771:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var i=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]];function o(e,t,n){var i=new t(4*e.length);return e.forEach((function(e,t){var o=4*t;i[o]=e[0],i[o+1]=e[1],i[o+2]=e[2],i[o+3]=Number.isFinite(e[3])?e[3]:n})),i}},811:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(741),o=n(744),a=n(735),r=n(736),s=function(e){return e.length},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;Object(a.a)(this,e),this.sortedBins=this.getSortedBins(t,n),this.maxCount=this.getMaxCount(),this.binMap=this.getBinMap()}return Object(r.a)(e,[{key:"getSortedBins",value:function(e,t){return e.reduce((function(e,n,i){var o=t(n.points);return null!=o&&e.push({i:Number.isFinite(n.index)?n.index:i,value:o,counts:n.points.length}),e}),[]).sort((function(e,t){return e.value-t.value}))}},{key:"getValueRange",value:function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1],a=this.sortedBins.length;if(!a)return[0,0];var r=Math.ceil(n/100*(a-1)),s=Math.floor(i/100*(a-1));return[this.sortedBins[r].value,this.sortedBins[s].value]}},{key:"getMaxCount",value:function(){var e=0;return this.sortedBins.forEach((function(t){return e=e>t.counts?e:t.counts})),e}},{key:"getBinMap",value:function(){return this.sortedBins.reduce((function(e,t){return Object.assign(e,Object(i.a)({},t.i,t))}),{})}}]),e}()},812:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var i=n(758);function o(e,t){return function(n){return function(e,t,n){var o=e[1]-e[0];if(o<=0)return i.a.warn("quantizeScale: invalid domain, returning range[0]")(),t[0];var a=o/t.length,r=Math.floor((n-e[0])/a);return t[Math.max(Math.min(r,t.length-1),0)]}(e,t,n)}}function a(e,t){return function(n){return(n-e[0])/(e[1]-e[0])*(t[1]-t[0])+t[0]}}},853:function(e,t,n){"use strict";var i=n(735),o=n(736),a=n(738),r=n(737),s=n(747),l=n(739),u=n(838),c=n(814),g=n(1122),v=n(965),d=n(956),h=n(779),f=n(758),p=n(1110),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id,o=void 0===n?Object(p.c)("column-geometry"):n,s=y(e),l=s.indices,u=s.attributes;return Object(a.a)(this,Object(r.a)(t).call(this,Object(h.a)({},e,{id:o,indices:l,attributes:u})))}return Object(l.a)(t,e),t}(n(877).a);function y(e){var t=e.radius,n=e.height,i=void 0===n?1:n,o=e.nradial,a=void 0===o?10:o,r=e.vertices;f.a.assert(!r||r.length>=a);for(var s=a+1,l=3*s,u=2*Math.PI/a,c=new Uint16Array(3*a*2),g=new Float32Array(3*l),v=new Float32Array(3*l),d=0,h=0;h<s;h++)for(var p=h*u,m=r&&r[h%a],y=r&&r[(h+1)%a],x=Math.sin(p),b=Math.cos(p),C=0;C<2;C++)g[d+0]=m?m[0]:b*t,g[d+1]=m?m[1]:x*t,g[d+2]=(.5-C)*i,v[d+0]=m?y[0]-m[0]:b,v[d+1]=m?y[1]-m[1]:x,d+=3;for(var S=0;S<s;S++){var P=Math.floor(S/2)*Math.sign(S%2-.5),M=P*u,k=r&&r[(P+a)%a],w=Math.sin(M),j=Math.cos(M);g[d+0]=k?k[0]:j*t,g[d+1]=k?k[1]:w*t,g[d+2]=i/2,v[d+2]=1,d+=3}for(var E=0,V=0;V<a;V++)c[E++]=2*V+0,c[E++]=2*V+2,c[E++]=2*V+0,c[E++]=2*V+1,c[E++]=2*V+1,c[E++]=2*V+3;return{indices:c,attributes:{POSITION:{size:3,value:g},NORMAL:{size:3,value:v}}}}n.d(t,"a",(function(){return P}));var x=g.a.fp64LowPart,b=new v.a,C=[0,0,0,255],S={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,fp64:!1,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:function(e){return e.position}},getFillColor:{type:"accessor",value:C},getLineColor:{type:"accessor",value:C},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:b,getColor:{deprecatedFor:["getFillColor","getLineColor"]}},P=function(e){function t(){return Object(i.a)(this,t),Object(a.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"getShaders",value:function(){return{vs:"\n#define SHADER_NAME column-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 normals;\n\nattribute vec3 instancePositions;\nattribute float instanceElevations;\nattribute vec2 instancePositions64xyLow;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute float instanceStrokeWidths;\n\nattribute vec3 instancePickingColors;\nuniform float opacity;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform bool extruded;\nuniform bool isStroke;\nuniform float coverage;\nuniform float elevationScale;\nuniform float edgeDistance;\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nvarying vec4 vColor;\n\nvoid main(void) {\n  \n  vec4 color = isStroke ? instanceLineColors : instanceFillColors;\n  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  float elevation = 0.0;\n  float strokeOffsetRatio = 1.0;\n\n  if (extruded) {\n    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;\n  } else if (isStroke) {\n    float widthPixels = clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n      widthMinPixels, widthMaxPixels) / 2.0;\n    strokeOffsetRatio += sign(positions.z) * project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);\n  }\n  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\n  float dotRadius = radius * coverage * shouldRender;\n  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\n  vec2 centroidPosition64xyLow = instancePositions64xyLow;\n  vec3 pos = vec3(project_size(rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius, 0.);\n\n  vec4 position_commonspace;\n  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64xyLow, pos, position_commonspace);\n\n  vec3 normals_commonspace = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\n\n  if (extruded && !isStroke) {\n    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, position_commonspace.xyz, normals_commonspace);\n    vColor = vec4(lightColor, color.a * opacity) / 255.0;\n  } else {\n    vColor = vec4(color.rgb, color.a * opacity) / 255.0;\n  }\n  picking_setPickingColor(instancePickingColors);\n}\n",fs:"#define SHADER_NAME column-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n}\n",modules:[this.use64bitProjection()?"project64":"project32","gouraud-lighting","picking"]}}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instancePositions64xyLow:{size:2,accessor:"getPosition",update:this.calculateInstancePositions64xyLow},instanceFillColors:{size:4,type:5121,transition:!0,accessor:"getFillColor",defaultValue:C},instanceLineColors:{size:4,type:5121,transition:!0,accessor:"getLineColor",defaultValue:C},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}},{key:"updateState",value:function(e){var n=e.props,i=e.oldProps,o=e.changeFlags;Object(s.a)(Object(r.a)(t.prototype),"updateState",this).call(this,{props:n,oldProps:i,changeFlags:o});var a=n.fp64!==i.fp64;if(a){var l=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(l)}),this.getAttributeManager().invalidateAll()}(a||n.diskResolution!==i.diskResolution||n.vertices!==i.vertices)&&this._updateGeometry(n)}},{key:"getGeometry",value:function(e,t){var n=new m({radius:1,height:2,vertices:t,nradial:e}),i=0;if(t)for(var o=0;o<e;o++){var a=t[o];i+=Math.sqrt(a[0]*a[0]+a[1]*a[1])/e}else i=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*i}),n}},{key:"_getModel",value:function(e){return new d.a(e,Object.assign({},this.getShaders(),{id:this.props.id,isInstanced:!0,shaderCache:this.context.shaderCache}))}},{key:"_updateGeometry",value:function(e){var t=e.diskResolution,n=e.vertices,i=this.getGeometry(t,n);this.setState({fillVertexCount:i.attributes.POSITION.value.length/3,wireframeVertexCount:i.indices.value.length}),this.state.model.setProps({geometry:i})}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,i=this.props,o=i.lineWidthUnits,a=i.lineWidthScale,r=i.lineWidthMinPixels,s=i.lineWidthMaxPixels,l=i.elevationScale,u=i.extruded,c=i.filled,g=i.stroked,v=i.wireframe,d=i.offset,h=i.coverage,f=i.radius,p=i.angle,m=this.state,y=m.model,x=m.fillVertexCount,b=m.wireframeVertexCount,C=m.edgeDistance,S="pixels"===o?n.distanceScales.metersPerPixel[2]:1;y.setUniforms(Object.assign({},t,{radius:f,angle:p/180*Math.PI,offset:d,extruded:u,coverage:h,elevationScale:l,edgeDistance:C,widthScale:a*S,widthMinPixels:r,widthMaxPixels:s})),u&&v&&(y.setProps({isIndexed:!0}),y.setVertexCount(b).setDrawMode(1).setUniforms({isStroke:!0}).draw()),c&&(y.setProps({isIndexed:!1}),y.setVertexCount(x).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!u&&g&&(y.setProps({isIndexed:!1}),y.setVertexCount(2*x/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}},{key:"calculateInstancePositions64xyLow",value:function(e,t){var n=t.startRow,i=t.endRow,o=this.use64bitPositions();if(e.constant=!o,o){var a=this.props,r=a.data,s=a.getPosition,l=e.value,c=n*e.size,g=Object(u.a)(r,n,i),v=g.iterable,d=g.objectInfo,h=!0,f=!1,p=void 0;try{for(var m,y=v[Symbol.iterator]();!(h=(m=y.next()).done);h=!0){var b=m.value;d.index++;var C=s(b,d);l[c++]=x(C[0]),l[c++]=x(C[1])}}catch(e){f=!0,p=e}finally{try{h||null==y.return||y.return()}finally{if(f)throw p}}}else e.value=new Float32Array(2)}}]),t}(c.a);P.layerName="ColumnLayer",P.defaultProps=S}}]);